<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application React 19 Moderne</title>

    <!-- Import Map : Doit être défini AVANT tout chargement de module -->
    <script type="importmap">
    {
      "imports": {
        "react": "esm.sh",
        "react-dom/client": "esm.sh"
      }
    }
    </script>

    <!-- Charge Babel pour transformer le JSX (URL corrigée) -->
    <script src="unpkg.com"></script>
</head>
<body>

    <div id="root"></div>

    <!-- Script de type "text/babel" avec data-type="module" pour interpréter l'importmap -->
    <script type="text/babel" data-type="module">
        import React, { useState } from 'react';
        import { createRoot } from 'react-dom/client';

        function ListeProduits({ categorie }) {
            const articles = [
                { id: 1, nom: "Pomme", cat: "Fruits" },
                { id: 2, nom: "Carotte", cat: "Legumes" },
                { id: 3, nom: "Banane", cat: "Fruits" }
            ];

            const selection = articles.filter(a => a.cat === categorie);

            return (
                <ul>
                    {selection.map(a => <li key={a.id}>{a.nom}</li>)}
                </ul>
            );
        }

        function App() {
            const [choix, setChoix] = useState("Fruits");

            return (
                <div>
                    <button onClick={() => setChoix("Fruits")}>Voir Fruits</button>
                    <button onClick={() => setChoix("Legumes")}>Voir Légumes</button>
                    
                    <h1>Rayon : {choix}</h1>
                    <ListeProduits categorie={choix} />
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

</body>
</html>
