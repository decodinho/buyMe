<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>React 19 - ESM & Babel</title>
    <!-- Chargement de Babel pour transformer le JSX en temps réel -->
    <script src="unpkg.com"></script>
    
    <!-- Import Map : définit les sources de React sans scripts classiques -->
    <script type="importmap">
    {
      "imports": {
        "react": "esm.sh",
        "react-dom/client": "esm.sh"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- Le type "text/babel" est nécessaire pour que Babel transforme le code -->
    <!-- data-type="module" permet d'utiliser les imports dans le script Babel -->
    <script type="text/babel" data-type="module">
        import React, { useState } from 'react';
        import { createRoot } from 'react-dom/client';

        function ListeProduits({ categorie }) {
            const articles = [
                { id: 1, nom: "Pomme", cat: "Fruits" },
                { id: 2, nom: "Carotte", cat: "Legumes" },
                { id: 3, nom: "Banane", cat: "Fruits" }
            ];

            const selection = articles.filter(a => a.cat === categorie);

            return (
                <ul>
                    {selection.map(a => <li key={a.id}>{a.nom}</li>)}
                </ul>
            );
        }

        function App() {
            // Utilisation directe de useState grâce à l'import
            const [choix, setChoix] = useState("Fruits");

            return (
                <div>
                    <button onClick={() => setChoix("Fruits")}>Voir Fruits</button>
                    <button onClick={() => setChoix("Legumes")}>Voir Légumes</button>
                    
                    <h1>Rayon : {choix}</h1>
                    <ListeProduits categorie={choix} />
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
