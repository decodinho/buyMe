<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application React 19 Moderne</title>

    <!-- Charge Babel depuis jsDelivr pour transformer le JSX en temps réel -->
    <script src="cdn.jsdelivr.net"></script>

    <!-- Import Map : Définit où trouver React sans utiliser de balises <script> classiques -->
    <script type="importmap">
    {
      "imports": {
        "react": "esm.sh",
        "react-dom/client": "esm.sh"
      }
    }
    </script>
</head>
<body>

    <div id="root"></div>

    <!-- Script de type "text/babel" pour le JSX + "data-type=module" pour autoriser les imports -->
    <script type="text/babel" data-type="module">
        import React, { useState } from 'react';
        import { createRoot } from 'react-dom/client';

        function ListeProduits({ categorie }) {
            const articles = [
                { id: 1, nom: "Pomme", cat: "Fruits" },
                { id: 2, nom: "Carotte", cat: "Legumes" },
                { id: 3, nom: "Banane", cat: "Fruits" }
            ];

            const selection = articles.filter(a => a.cat === categorie);

            return (
                <ul>
                    {selection.map(a => <li key={a.id}>{a.nom}</li>)}
                </ul>
            );
        }

        function App() {
            const [choix, setChoix] = useState("Fruits");

            return (
                <div>
                    <button onClick={() => setChoix("Fruits")}>Voir Fruits</button>
                    <button onClick={() => setChoix("Legumes")}>Voir Légumes</button>
                    
                    <h1>Rayon : {choix}</h1>
                    <ListeProduits categorie={choix} />
                </div>
            );
        }

        // Initialisation de l'application sur la div #root
        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

</body>
</html>
